{"componentChunkName":"component---src-templates-blog-post-js","path":"/AzureDevopsYaml/","result":{"data":{"site":{"siteMetadata":{"title":"Koushik's scribble"}},"markdownRemark":{"id":"c112ad4a-5e66-59d4-b7de-afd79cac6084","excerpt":"Background As we, within a team, start working together and digest that the operations are part of our daily activities, the subconscious part of our mind treat…","html":"<!-- Post Content -->\n<br/>\n<h2>Background</h2>\n<p>As we, within a team, start working together and digest that the operations are part of our daily activities, the subconscious part of our mind treat these as development actions. This gradually mutates into code (in any language) and automation, assuming that it will simplify our lives! </p>\n<p>When a ProductOwner starts his question with “Is it possible to …”, thinking with my developers hat, without any hesitation the reply would be “Every thing is possible with code”. <em>(But wait how many lines of code are we writing everyday. Again I started writing code to count the number of lines of code, number of git diffs and make a statics out of it. That is another post later.)</em></p>\n<p><em><a href=\"https://dev.azure.com\">Azure DevOps</a></em> is almost a default across many organizations. Continuous improvements on the features by the product team and their transparency on their <em>[road map](<a href=\"https://dev.azure.com/mseng/AzureDevOpsRoadmap/\">https://dev.azure.com/mseng/AzureDevOpsRoadmap/</a></em>workitems/recentlyupdated)_ helps in making a rational decision on the implementations. Most of the leading Application release automation products, pipeline as code is a norm. As I already said, our inclination towards writing code is now much more biased, isn’t it? </p>\n<br/>\n<h3><em>Concern</em>: <strong>Pipeline as Code != Pipeline as Scripture</strong></h3>\n<p>Azure DevOps supports developers in organizing pipelines as either YAML or friendly drag-drop view. Teams prefer former approach which has advantages over the later one mostly because of the embedded DevOps culture.</p>\n<table>\n<thead>\n<tr>\n<th>YAML</th>\n<th>Classic</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><img src=\"../../assets2020-07-02-AzDevops-Yaml-Build.jpg\"></td>\n<td><img src=\"../../assets2020-07-02-AzDevops-Classic-Build.jpg\"></td>\n</tr>\n</tbody>\n</table>\n<h3><em>How to Address</em>: <strong>Standards when writing pipeline</strong></h3>\n<p>Inline with general coding standards, team should also enforce all possible actions when writing a pipelines. Some basic rules that can be enforced are </p>\n<ul>\n<li>Comments at the top of the pipeline describing briefly about activities performed within each Jobs. Avoid granular details at task level, unless required\n<img src=\"../../assets2020-07-02-AzDevops-Yaml-Comments.jpg\"></li>\n<li>List all the <a href=\"https://docs.microsoft.com/en-us/azure/devops/pipelines/process/variables?view=azure-devops&#x26;tabs=yaml%2Cbatch#allow-at-queue-time\">Queue time variables</a> because they are not evident in the YAML but added within the Azure DevOps pipeline\n<img src=\"../../assets2020-07-02-AzDevops-Yaml-Queuetime-Var.jpg\"></li>\n<li>\n<p>Maintain and identify the differences</p>\n<ul>\n<li><strong>PascalCase</strong> for Parameters</li>\n<li><strong>camelCase</strong> for variables</li>\n<li><strong>UPPERCASE<em>UNDERSCORE</em>SEPARATED_NAME</strong> for Stage Names</li>\n<li><strong>lowercase<em>underscore</em>separated_name</strong> for Job Names</li>\n<li><strong>lowercase<em>underscore</em>separated_name</strong> for task Names</li>\n</ul>\n</li>\n<li>Azure DevOps accepts runtime variables in either <code class=\"language-text\">$(var)</code> or <code class=\"language-text\">$[variables.var]</code> format. Stay consistent in runtime variable declaration to avoid confusion. </li>\n<li>Target towards light weight Jobs. Single Stage with multiple Jobs is acceptable as well.</li>\n<li>Finally, work towards not embedding process complexity into pipeline YAML.</li>\n</ul>\n <br/>\n<h3><em>Concern</em>: <strong>Pipeline name</strong></h3>\n<p>By default new pipeline created in Azure DevOps is named <code class=\"language-text\">YourRepo - CI</code> or <code class=\"language-text\">YourRepo - CI(#)</code>. This is not always the case if there are bunch of solutions hosted within the same repo. </p>\n<h3><em>How to Address</em>: <strong>Naming convention</strong></h3>\n<ul>\n<li>When a repo has <strong><em>one solution</em></strong> with one pipeline which does the full deployment, just name the file as <code class=\"language-text\">azure-pipeline.yaml</code> which will be automatically picked up by Azure DevOps for continuous integration.</li>\n<li>While working with multiple YAML files, file names should represent target build/deployment process</li>\n<li>Having Azure DevOps Pipeline name as the YAML file name is always easy to map the reference.</li>\n<li>Templates are reusable entities, naming stage template and job template as <code class=\"language-text\">{common-process}.stage-template.yaml</code> or <code class=\"language-text\">{common-process}.job-template.yaml</code></li>\n<li>Rename pipeline as soon as they are added manually.\n<img src=\"2020-07-02-AzDevops-Yaml-PipelineName\"></li>\n</ul>\n<br/>\n<h3><em>Concern</em> : <strong>Random execution name</strong></h3>\n<p>Every execution of the pipeline should tell a story of what could have been done. Execution Name make a story along with comment messages. </p>\n<h3><em>How to Address</em>: <strong>Naming convention</strong></h3>\n<ul>\n<li>Select a standard name similar to below, with multiple Repos in same Project also have a repo name\n<code class=\"language-text\">name: $(TeamProject)_$(BuildDefinitionName)_$(SourceBranch)_$(Date:yyyyMMdd)$(Rev:.r)</code></li>\n<li>Build names can be changed during the execution of the pipeline using <code class=\"language-text\">$(build.updatebuildnumber)</code></li>\n</ul>\n<p>So, these are some of my learning when working with Azure DevOps YAML. These could be simple common sense points but they help in betterment of work.</p>","frontmatter":{"title":"Azure DevOps YAML Working models and challenges","date":"July 01, 2020","description":"","tags":["azure-devops"]}}},"pageContext":{"slug":"/AzureDevopsYaml/","previous":{"fields":{"slug":"/about-me/"},"frontmatter":{"title":"About me"}},"next":{"fields":{"slug":"/code-highlighting-post/"},"frontmatter":{"title":"Syntax Highlighting Post"}}}},"staticQueryHashes":["2841359383"]}